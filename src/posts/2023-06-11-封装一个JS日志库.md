---
permalink: /posts/js-logger-library
title: å°äº†ä¸€ä¸ªJSæ—¥å¿—åº“
tags: å‰ç«¯çç ”ç©¶
emotag: 
date: 2023-06-11 13:25:06 +08:00
last_modified_at: 2023-06-11 23:13:15 +08:00
---

è™½ç„¶ä¸æ˜¯ä¸“ä¸šå‰ç«¯ï¼Œå¶å°”ä¹Ÿéœ€è¦å†™å†™jsä»£ç ï¼Œç»å¸¸ä¼šæœ‰æ‰“å°æ—¥å¿—çš„éœ€æ±‚ã€‚

ç›´æ¥ç”¨`console.log`æœ‰ç‚¹åŸå§‹ï¼Œä½†å¼„ä¸ªå‡½æ•°æŠŠconsole.logåŒ…èµ·æ¥åˆä¼šå¯¼è‡´æ§åˆ¶å°ä¸¢å¤±è¡Œå·ä¿¡æ¯ã€‚

äºæ˜¯å°±ç½‘ä¸Šå°æœäº†ä¸€ä¸‹ï¼Œç®€å•å°è£…ä¸€ä¸ªJSæ—¥å¿—åº“ï¼Œä¸»è¦ç‰¹æ€§å¦‚ä¸‹ï¼š

- è‡ªåŠ¨åœ¨æ—¥å¿—ä¿¡æ¯å‰æ·»åŠ å¸¦é¢œè‰²çš„æ ‡é¢˜ã€å½“å‰æ—¶é—´ä¿¡æ¯

- æ”¯æŒæ—¥å¿—çº§åˆ«æ§åˆ¶ï¼ˆFatal, Error, Warn, Info, Debug, Traceï¼‰

- åƒåŸç”Ÿæ–¹æ³•ä¸€æ ·æ”¯æŒå¤šä¸ªå…¥å‚

- æ§åˆ¶å°å¯æ­£ç¡®æ˜¾ç¤ºè¡Œå·

ä»£ç å°±ä¸è¯¦è¯´äº†ï¼Œç®€å•è®°ä¸€ä¸‹è¿™æ¬¡æ–°å­¦åˆ°çš„å§¿åŠ¿ï¼š

1. ä½¿ç”¨`console.log.bind`æ–¹æ³•æ¥æ·»åŠ æ—¶é—´ç­‰ä¿¡æ¯ï¼ŒåŒæ—¶ä¿è¯è¡Œå·æ­£ç¡®

    ```js
    this._debug = console.log.bind(console, '%c%s[%s][DEBUG]', "color:#800080", title, _LogDateTime);
    // å…¶ä¸­é‡å†™äº†_LogDateTimeçš„toStringæ–¹æ³•ï¼Œä½¿å®ƒèƒ½è¿”å›å®æ—¶çš„æ—¶é—´
    ```

    ä½†è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ—¥å¿—çš„é¢œè‰²åªèƒ½ç»™å‰è¾¹çš„`%s[%s][DEBUG]`éƒ¨åˆ†ï¼Œæˆ‘è¿˜ä¸çŸ¥é“å¦‚ä½•è§£å†³ã€‚

2. åˆ©ç”¨`Object.defineProperty`å’Œ`Object.freeze`å®ç°Logger.LEVELä¸å¯ä¿®æ”¹

3. ç”¨åˆ°äº†æ„é€ å‡½æ•°ï¼Œå¤§æ¦‚è¿˜æ˜¯äº†è§£äº†prototypeæ˜¯ä¸ªå•¥ï¼Œä»¥åŠthisçš„å‘ï¼ˆthisåŠ¨æ€æŒ‡å‘è°ƒç”¨æ–¹ï¼‰ï¼Œä¸å¾—ä¸è¯´jsçš„å†å²é—®é¢˜çœŸæ˜¯ä¸€è¨€éš¾å°½ã€‚

**[>> æŸ¥çœ‹å®Œæ•´ä»£ç ç‚¹è¿™é‡Œï¼šLogger.js](/assets/posts/2023-06-11-js-logger-library/Logger.js)**

æ­¤é¡µé¢å·²ç»å¼•ç”¨äº†æ­¤åº“ï¼Œä½ å¯ä»¥ç›´æ¥F12æ‰“å¼€æ§åˆ¶å°ï¼ŒæŸ¥çœ‹`log`å¯¹è±¡æˆ–`Logger`ç±»ã€‚ï¼ˆè¯·å¿½ç•¥åè¾¹çš„disqusæŠ¥é”™ï¼‰

<script src="/assets/posts/2023-06-11-js-logger-library/Logger.js"></script>

<script>
    console.log(`=====================================================`);
    console.log(`æµ‹è¯•ï¼šæ‰“å°æ—¥å¿—çº§åˆ«Logger.LEVEL`);
    console.log(Logger.LEVEL);

    console.log(`æµ‹è¯•: ç›´æ¥è°ƒç”¨Logger()ä¼šå‡ºé”™`);
    try {
        Logger();
    } catch (e) {
        console.error(e);
    }

    function testLogger(log) {
        log.fatal('Woops!', { a: 1 });
        log.error('Woops!', { a: 1 });
        log.warn('Woops!', { a: 1 });
        log.info('Woops!', { a: 1 });
        log.debug('Woops!', { a: 1 });
        log.trace('Woops!', { a: 1 });
    }

    console.log(`æµ‹è¯•: var log = new Logger('ForTest', 'trace');`);
    var log = new Logger('ForTest', 'trace');
    testLogger(log);

    console.log(`æµ‹è¯•: log.level = 'error';`);
    log.level = 'error';
    testLogger(log);

    console.log(`æµ‹è¯•: log.level = 0;`);
    log.level = 0;
    testLogger(log);

    console.log(`æµ‹è¯•: log.title = 'NewTitle';`);
    log.title = 'NewTitle';
    testLogger(log);

    console.log(`æµ‹è¯•: æ‰“å°log`);
    console.log(log);
    console.log(`=====================================================`);
    console.log(`==============ğŸ‘† Logger.js æµ‹è¯• ğŸ‘†==================`);
    console.log(`=====================================================`);
</script>